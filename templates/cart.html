{% include "header.html" %}
<section>
	<div class="container py-5">
		<a href="/products">< Back to products</a>
		<div class="page-title">Your Cart</div>
		{% if session["cart"] is defined %}
		<form 
		action="updatecart" method="post" class="border-bottom py-5">
			{% for item in session["cart"].values() %}
			<div
				class="
					d-flex
					justify-content-between
					align-items-center
					cart-item-wrapper
					my-3
				"
			>
				<img src="{{ item["image"] }}" alt="{{ item["name"] }}" />
				<div class="cart-details" style="min-width: 240px">
					<h4>{{ item["name"] }}</h4>
					<h6>Quantiy: {{ item["qty"] }}</h6>
					<h5>PHP {{ item["price"] }}</h5>
				</div>
				<input type="hidden" name="code" value="{{ item['code'] }}">
				<input type="hidden" name="name" value="{{ item['name'] }}">
				<input type="hidden" name="subtotal" value="{{ item['subtotal'] }}">
				<div>
					<span class="minus">-</span>
					<input
						type="number"
						value="1"
						min="1"
						step="1"
						class="product-input"
						value="{{ item['qty'] }}"
					/>
					<span class="plus">+</span>
				</div>
				<p class="cart-details-price">PHP {{ item["price"] }}</p>
				<div class="cart-details-remove">
					<a href="/deleteitem?code={{ item["code"] }}">
						<svg
						width="25"
						height="26"
						viewBox="0 0 25 26"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<path
							d="M2 1.92627L23 24.473M2 24.473L23 1.92627"
							stroke="#868686"
							stroke-width="3"
						/>
					</svg>
					</a>
					
				</div>
			</div>
			<div
				class="d-flex justify-content-end align-items-center cart-button-wrapper"
			>
				<a href="/deleteall">
					<button class="secondary-button">Clear</button>
				</a>
				<button class="cta-button" type="submit">Update</button>
			</div>
			{% endfor %}
		</form>
		<div
			class="
				d-flex
				justify-content-end
				align-items-center
				cart-subtotal-wrapper
			"
		>
			<h2>Subtotal</h2>
			<h1>{{ session["cart"].values()|sum(attribute="subtotal") }}</h1>
		</div>
		<div
			class="d-flex justify-content-end align-items-center cart-button-wrapper"
		>
			<a href="/deleteall" style="margin: 0 16px;">Clear</a>
			<a href="/products">
				<button class="secondary-button">Continue Shopping</button>
			</a>
			<a href="/checkout">
				<button class="cta-button">Proceed to Checkout</button>
			</a>
		</div>
		{% else %}
		<div>Your cart is empty</div>
		{% endif %}
	</div>
</section>
{% include "footer.html" %}
